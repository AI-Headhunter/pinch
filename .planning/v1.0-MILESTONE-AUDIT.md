---
milestone: v1.0
audited: 2026-02-27T08:45:00Z
status: gaps_found
scores:
  requirements: 44/46
  phases: 6/6
  integration: 45/47
  flows: 6/7
gaps:
  requirements:
    - id: "OVRS-04"
      status: "partial"
      phase: "Phase 6"
      claimed_by_plans: ["06-03-PLAN.md"]
      completed_by_plans: ["06-03-SUMMARY.md"]
      verification_status: "passed"
      evidence: "Outbound attribution encoded correctly in application/x-pinch+json wrapper. Inbound attribution parsed at message-manager.ts:222 but NOT persisted to MessageRecord — no attribution column in SQLite schema. pinch-history cannot surface attribution."
    - id: "OVRS-01, OVRS-02, OVRS-03, OVRS-05, CONN-05"
      status: "partial"
      phase: "Phase 6"
      claimed_by_plans: ["06-01-PLAN.md", "06-03-PLAN.md", "06-04-PLAN.md"]
      completed_by_plans: ["06-01-SUMMARY.md", "06-03-SUMMARY.md", "06-04-SUMMARY.md"]
      verification_status: "passed"
      evidence: "All 5 Phase 6 CLI tools exist with full implementations and tests, but missing from skill/package.json bin field — not invocable as named CLI commands after install"
  integration:
    - from: "skill/package.json"
      to: "Phase 6 CLI tools"
      issue: "5 tools (pinch-activity, pinch-intervene, pinch-mute, pinch-audit-verify, pinch-audit-export) missing from bin entries"
    - from: "message-manager.ts"
      to: "message-store.ts"
      issue: "inboundAttribution parsed from application/x-pinch+json but not written to MessageRecord — no attribution column in schema"
  flows:
    - flow: "Human intervention attribution display"
      breaks_at: "message-manager.ts line 245 — MessageRecord construction omits inboundAttribution"
tech_debt:
  - phase: 01-foundation-and-crypto-primitives
    items:
      - "Warning: InsecureSkipVerify: true in WebSocket accept options — dev-only, documented for production lockdown"
      - "Info: Address taken from ?address= query param without auth — replaced by challenge-response in Phase 2"
  - phase: 02-authentication-and-connection
    items:
      - "Info: Empty pubkey bytes in ConnectionRequest/ConnectionResponse — relay-auth provides identity; getPeerPublicKey fallback exists"
  - phase: 03-encrypted-1-1-messaging
    items:
      - "Medium: No CLI tools for inbound connection lifecycle (approve/reject/revoke/block/unblock) — methods exist but not surfaced"
      - "Medium: No pinch-approve tool for escalated messages — getPendingForReview() and approveMessage() exist but no CLI surface"
      - "Low: Missing @types/libsodium-wrappers-sumo in devDependencies — mitigated by skipLibCheck: true"
---

# Milestone v1.0 Audit Report

**Milestone:** v1.0
**Audited:** 2026-02-27
**Status:** gaps_found
**Score:** 44/46 requirements fully satisfied (2 gaps, both small fixes)

## Milestone Definition of Done

From PROJECT.md: Agents can securely message each other with human consent and oversight at every step — no message flows without explicit human approval of the connection.

6 phases delivered:
1. Foundation and Crypto Primitives — proto schema, Ed25519 identity, Go relay
2. Authentication and Connection — challenge-response auth, connection lifecycle, blocking
3. Encrypted 1:1 Messaging — NaCl box E2E encryption, message management, skill tools
4. Store-and-Forward — bbolt message queue, flush-on-reconnect
5. Full Autonomy and Permissions — 4-tier autonomy, permissions manifest, circuit breakers
6. Oversight and Safety — activity feed, rate limiting, intervention, muting, audit

## Phase Verification Summary

| Phase | Name | Status | Must-Haves | Requirements |
|-------|------|--------|------------|--------------|
| 1 | Foundation and Crypto Primitives | passed | 13/13 | 13/13 |
| 2 | Authentication and Connection | passed | 12/12 | 8/8 |
| 3 | Encrypted 1:1 Messaging | passed | 14/14 | 7/7 |
| 4 | Store-and-Forward | passed | 2/2 | 2/2 |
| 5 | Full Autonomy and Permissions | gaps_found (resolved) | 21/22 → 22/22 | 8/8 |
| 6 | Oversight and Safety | passed | 18/18 | 8/8 |

Phase 5 gap (SKILL.md wrong permission tier names) was resolved during Phase 6 execution when 06-04 updated SKILL.md.

## Requirements Coverage (3-Source Cross-Reference)

**Sources:**
1. REQUIREMENTS.md traceability table — 46/46 `[x]` Complete
2. SUMMARY.md frontmatter `requirements-completed` — all 46 IDs present across 20 summaries
3. VERIFICATION.md per-phase requirements tables — all 46 SATISFIED

### Full Requirements Matrix

| REQ-ID | Phase | VERIFICATION | SUMMARY | REQUIREMENTS | Status |
|--------|-------|--------------|---------|--------------|--------|
| IDNT-01 | 1 | SATISFIED | 01-02 | [x] | satisfied |
| IDNT-02 | 1 | SATISFIED | 01-02 | [x] | satisfied |
| IDNT-03 | 1 | SATISFIED | 01-02 | [x] | satisfied |
| PROT-01 | 1 | SATISFIED | 01-01 | [x] | satisfied |
| PROT-02 | 1 | SATISFIED | 01-01 | [x] | satisfied |
| PROT-03 | 1 | SATISFIED | 01-01 | [x] | satisfied |
| PROT-04 | 1 | SATISFIED | 01-01 | [x] | satisfied |
| RELY-01 | 1 | SATISFIED | 01-03 | [x] | satisfied |
| RELY-02 | 2 | SATISFIED | 02-01 | [x] | satisfied |
| RELY-03 | 1 | SATISFIED | 01-03 | [x] | satisfied |
| RELY-04 | 3 | SATISFIED | 03-01 | [x] | satisfied |
| RELY-05 | 4 | SATISFIED | 04-01,04-02 | [x] | satisfied |
| RELY-06 | 4 | SATISFIED | 04-02 | [x] | satisfied |
| RELY-07 | 6 | SATISFIED | 06-02 | [x] | satisfied |
| RELY-08 | 1 | SATISFIED | 01-03 | [x] | satisfied |
| CRYP-01 | 3 | SATISFIED | 03-02,03-03 | [x] | satisfied |
| CRYP-02 | 1 | SATISFIED | 01-02 | [x] | satisfied |
| CRYP-03 | 1 | SATISFIED | 01-02 | [x] | satisfied |
| CRYP-04 | 1 | SATISFIED | 01-02 | [x] | satisfied |
| CRYP-05 | 3 | SATISFIED | 03-01,03-02 | [x] | satisfied |
| CONN-01 | 2 | SATISFIED | 02-03,02-04 | [x] | satisfied |
| CONN-02 | 2 | SATISFIED | 02-03,02-04 | [x] | satisfied |
| CONN-03 | 2 | SATISFIED | 02-04 | [x] | satisfied |
| CONN-04 | 2 | SATISFIED | 02-02 | [x] | satisfied |
| CONN-05 | 6 | SATISFIED | 06-03 | [x] | **partial** |
| CONN-06 | 2 | SATISFIED | 02-04 | [x] | satisfied |
| AUTO-01 | 2 | SATISFIED | 02-03 | [x] | satisfied |
| AUTO-02 | 2 | SATISFIED | 02-03 | [x] | satisfied |
| AUTO-03 | 5 | SATISFIED | 05-01 | [x] | satisfied |
| AUTO-04 | 5 | SATISFIED | 05-01 | [x] | satisfied |
| AUTO-05 | 5 | SATISFIED | 05-02 | [x] | satisfied |
| AUTO-06 | 5 | SATISFIED | 05-01 | [x] | satisfied |
| AUTO-07 | 5 | SATISFIED | 05-01 | [x] | satisfied |
| AUTO-08 | 5 | SATISFIED | 05-02 | [x] | satisfied |
| AUTO-09 | 5 | SATISFIED | 05-02 | [x] | satisfied |
| AUTO-10 | 5 | SATISFIED | 05-03 | [x] | satisfied |
| OVRS-01 | 6 | SATISFIED | 06-01 | [x] | **partial** |
| OVRS-02 | 6 | SATISFIED | 06-01 | [x] | **partial** |
| OVRS-03 | 6 | SATISFIED | 06-03 | [x] | **partial** |
| OVRS-04 | 6 | SATISFIED | 06-03 | [x] | **partial** |
| OVRS-05 | 6 | SATISFIED | 06-01,06-04 | [x] | **partial** |
| OVRS-06 | 6 | SATISFIED | 06-04 | [x] | satisfied |
| SKIL-01 | 3 | SATISFIED | 03-04 | [x] | satisfied |
| SKIL-02 | 3 | SATISFIED | 03-04 | [x] | satisfied |
| SKIL-03 | 3 | SATISFIED | 03-04 | [x] | satisfied |
| SKIL-04 | 3 | SATISFIED | 03-03,03-04 | [x] | satisfied |

**Orphaned requirements:** None. All 46 requirements present in at least one VERIFICATION.md.

### Gap Details

**Gap 1: Phase 6 tools missing from package.json bin (OVRS-01, OVRS-02, OVRS-03, OVRS-05, CONN-05)**

All 5 Phase 6 CLI tools exist with full implementations, tests, and SKILL.md documentation. They have self-executable entry points (`process.argv[1]` detection). However, they are absent from `skill/package.json` `"bin"` field and cannot be invoked as named CLI commands after `pnpm install`.

Current bin has 7 entries (pinch-send through pinch-permissions). Missing:
- `pinch-activity` → `./dist/tools/pinch-activity.js`
- `pinch-intervene` → `./dist/tools/pinch-intervene.js`
- `pinch-mute` → `./dist/tools/pinch-mute.js`
- `pinch-audit-verify` → `./dist/tools/pinch-audit-verify.js`
- `pinch-audit-export` → `./dist/tools/pinch-audit-export.js`

**Fix:** 5-line addition to package.json bin field.

**Gap 2: Inbound attribution not persisted (OVRS-04)**

`message-manager.ts` correctly decodes `inboundAttribution` from the `application/x-pinch+json` wrapper (line 222), but the `MessageRecord` interface has no `attribution` field and the messages SQLite table has no `attribution` column. The parsed value is discarded at line 245 when constructing the `MessageRecord`.

Outbound attribution works correctly (encoded in wire format). Only receiving-side persistence is missing.

**Fix:** Add `attribution` column to messages schema, field to `MessageRecord` interface, populate in `handleIncomingMessage()`.

## Integration Check Results

**47 cross-phase connections checked:** 45 wired, 2 partial

### E2E Flows

| # | Flow | Status |
|---|------|--------|
| 1 | Identity → auth → encrypt → route → decrypt → receive | Complete |
| 2 | Connection request → approval → key exchange → messaging | Complete |
| 3 | Inbound → enforcement pipeline (permissions → CB → routing) | Complete |
| 4 | Rate limiting → RateLimited proto → TypeScript handling | Complete |
| 5 | Human intervention → attribution display | **Partial** (attribution not persisted) |
| 6 | Audit: recording → hash chain → verify → export | Complete |
| 7 | Muting: mute → delivered but not surfaced → audit log | Complete |

## Tech Debt (Non-Blocking)

| Phase | Item | Severity |
|-------|------|----------|
| 1 | InsecureSkipVerify: true in WebSocket accept | Warning |
| 1 | Address from ?address= without auth | Info (replaced Phase 2) |
| 2 | Empty pubkey bytes in ConnectionRequest/Response | Info (relay-auth suffices) |
| 3 | No CLI tools for inbound connection lifecycle | Medium |
| 3 | No pinch-approve tool for escalated messages | Medium |
| 3 | Missing @types/libsodium-wrappers-sumo | Low |

**Total: 6 items across 3 phases. None are blockers.**

## Test Evidence

| Suite | Tests | Status |
|-------|-------|--------|
| Go relay tests | 79+ | Pass |
| TypeScript skill tests | 255+ | Pass |
| Cross-language crypto | 6 | Pass |
| Integration tests | 9+ | Pass |

---
*Audited: 2026-02-27*
*Auditor: Claude (gsd-milestone-audit)*
